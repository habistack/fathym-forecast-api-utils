module.exports = async function (context, req) {
  // How to get params:
  // req.query.name || (req.body && req.body.name)

  var outData = [{"lat":40.02105,"lng":-105.26452,"relative-seconds":0,"values":[{"value":310.38082878112795,"var":{"level":"Surface","name":"Temperature"}}]},{"lat":40.01829,"lng":-105.26313,"relative-seconds":64,"values":[{"value":310.4405448489719,"var":{"level":"Surface","name":"Temperature"}}]},{"lat":40.01721,"lng":-105.2586,"relative-seconds":123,"values":[{"value":310.4743474324544,"var":{"level":"Surface","name":"Temperature"}}]},{"lat":40.01354,"lng":-105.25872,"relative-seconds":183,"values":[{"value":310.69830627441405,"var":{"level":"Surface","name":"Temperature"}}]},{"lat":40.00878,"lng":-105.25874,"relative-seconds":243,"values":[{"value":310.733723449707,"var":{"level":"Surface","name":"Temperature"}}]},{"lat":40.0014,"lng":-105.25872,"relative-seconds":303,"values":[{"value":310.769140625,"var":{"level":"Surface","name":"Temperature"}}]},{"lat":39.9964,"lng":-105.25215,"relative-seconds":363,"values":[{"value":310.80455780029297,"var":{"level":"Surface","name":"Temperature"}}]},{"lat":39.98691,"lng":-105.23555,"relative-seconds":422,"values":[{"value":309.4456867726644,"var":{"level":"Surface","name":"Temperature"}}]},{"lat":39.9851,"lng":-105.23162,"relative-seconds":482,"values":[{"value":309.47797894795735,"var":{"level":"Surface","name":"Temperature"}}]},{"lat":39.97997,"lng":-105.22051,"relative-seconds":542,"values":[{"value":309.51027112325033,"var":{"level":"Surface","name":"Temperature"}}]},{"lat":39.96826,"lng":-105.19256,"relative-seconds":602,"values":[{"value":307.21770218743217,"var":{"level":"Surface","name":"Temperature"}}]},{"lat":39.96384,"lng":-105.18126,"relative-seconds":662,"values":[{"value":309.2519561682807,"var":{"level":"Surface","name":"Temperature"}}]},{"lat":39.95515,"lng":-105.16016,"relative-seconds":721,"values":[{"value":307.2141441684299,"var":{"level":"Surface","name":"Temperature"}}]},{"lat":39.94411,"lng":-105.14477,"relative-seconds":781,"values":[{"value":307.23914467705623,"var":{"level":"Surface","name":"Temperature"}}]},{"lat":39.93727,"lng":-105.13292,"relative-seconds":841,"values":[{"value":309.2826868523492,"var":{"level":"Surface","name":"Temperature"}}]},{"lat":39.92432,"lng":-105.11101,"relative-seconds":901,"values":[{"value":306.4141456943088,"var":{"level":"Surface","name":"Temperature"}}]},{"lat":39.91424,"lng":-105.09125,"relative-seconds":961,"values":[{"value":310.0794587029351,"var":{"level":"Surface","name":"Temperature"}}]},{"lat":39.90208,"lng":-105.08208,"relative-seconds":1020,"values":[{"value":310.11326128641764,"var":{"level":"Surface","name":"Temperature"}}]},{"lat":39.88946,"lng":-105.07365,"relative-seconds":1080,"values":[{"value":310.2006055450439,"var":{"level":"Surface","name":"Temperature"}}]},{"lat":39.87419,"lng":-105.06245,"relative-seconds":1140,"values":[{"value":310.23810605367026,"var":{"level":"Surface","name":"Temperature"}}]},{"lat":39.86344,"lng":-105.05662,"relative-seconds":1200,"values":[{"value":310.2328461456299,"var":{"level":"Surface","name":"Temperature"}}]},{"lat":39.84881,"lng":-105.04671,"relative-seconds":1260,"values":[{"value":310.12560707092285,"var":{"level":"Surface","name":"Temperature"}}]},{"lat":39.83888,"lng":-105.03432,"relative-seconds":1324,"values":[{"value":310.16560761345755,"var":{"level":"Surface","name":"Temperature"}}]},{"lat":39.83192,"lng":-105.01075,"relative-seconds":1383,"values":[{"value":309.9753997802734,"var":{"level":"Surface","name":"Temperature"}}]},{"lat":39.82767,"lng":-104.99542,"relative-seconds":1443,"values":[{"value":310.01394195556645,"var":{"level":"Surface","name":"Temperature"}}]},{"lat":39.82661,"lng":-104.98404,"relative-seconds":1503,"values":[{"value":310.0524841308594,"var":{"level":"Surface","name":"Temperature"}}]},{"lat":39.81858,"lng":-104.98351,"relative-seconds":1563,"values":[{"value":310.09102630615234,"var":{"level":"Surface","name":"Temperature"}}]},{"lat":39.80802,"lng":-104.98332,"relative-seconds":1623,"values":[{"value":310.3358184814453,"var":{"level":"Surface","name":"Temperature"}}]},{"lat":39.79893,"lng":-104.98645,"relative-seconds":1682,"values":[{"value":310.3767912038167,"var":{"level":"Surface","name":"Temperature"}}]},{"lat":39.78503,"lng":-104.98956,"relative-seconds":1742,"values":[{"value":310.4767569902208,"var":{"level":"Surface","name":"Temperature"}}]},{"lat":39.77909,"lng":-104.98959,"relative-seconds":1802,"values":[{"value":310.5205074988471,"var":{"level":"Surface","name":"Temperature"}}]},{"lat":39.77052,"lng":-104.99208,"relative-seconds":1862,"values":[{"value":310.5642580074734,"var":{"level":"Surface","name":"Temperature"}}]},{"lat":39.76688,"lng":-104.99507,"relative-seconds":1922,"values":[{"value":310.60800851609974,"var":{"level":"Surface","name":"Temperature"}}]},{"lat":39.7618,"lng":-104.99499,"relative-seconds":1981,"values":[{"value":310.65102984958224,"var":{"level":"Surface","name":"Temperature"}}]},{"lat":39.75843,"lng":-104.99314,"relative-seconds":2041,"values":[{"value":310.77307896931967,"var":{"level":"Surface","name":"Temperature"}}]},{"lat":39.7552,"lng":-104.99315,"relative-seconds":2101,"values":[{"value":310.8116211446127,"var":{"level":"Surface","name":"Temperature"}}]},{"lat":39.75282,"lng":-104.99972,"relative-seconds":2152,"values":[{"value":310.8443819936117,"var":{"level":"Surface","name":"Temperature"}}]}]

  let now = Math.round((new Date).getTime() / 1000)
  for( let i=0; i<outData.length; i++) {
    outData[i]["absolute-seconds"] = outData[i]["relative-seconds"] + now
    delete outData[i]["relative-seconds"]
  }

  context.done(null, {body: JSON.stringify(outData),
                      headers: {"Content-Type": "application/json"}})
};
